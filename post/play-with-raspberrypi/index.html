<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
	<meta name='renderer' content='webkit'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no'>
	<meta name='description' content='记录学习的点点滴滴'>
	<meta name='keywords' content='前端,PHP,GO,编程博客'>
	<title>玩转树莓派 &middot; 苏苏的博客</title>
	<link rel="stylesheet" type="text/css" href="/css/style.min.css">
	<link href="" rel="alternate" type="application/rss+xml" title="苏苏的博客" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
	<link rel="shortcut icon" href="/favicon.png">
</head>
<body>
<header class="header">
	<div class="header-main">
		<a href="/"><img src="/img/avatar.jpg" class="header-avatar"></a>
		<h1>苏苏的博客</h1>
		<p class="sub-title">简约至极</p>
		<ul class="contact">
			<a href="https://github.com/suconghou" target="_blank"><i class="fa fa-github"></i></a>
			<a href="javascript:music.show(1)"><i class="fa fa-music"></i></a>
		</ul>
	</div>
</header>

<aside></aside>

<div class="content container">
	<div class="post">
		<h1 class="post-title">
			<a href="javascript:void(0)"> 玩转树莓派</a>
		</h1>
		<p class="post-date">Sun, Jan 17, 2016</p>
		
		<div class="post-text">
			

<h2 id="官方操作系统">官方操作系统</h2>

<p><a href="https://www.raspberrypi.org/downloads/raspbian/">https://www.raspberrypi.org/downloads/raspbian/</a></p>

<p>带桌面版1.4G</p>

<p>精简版293MB  下载 <code>wget  https://downloads.raspberrypi.org/raspbian_lite_latest</code></p>

<h2 id="安装其他操作系统">安装其他操作系统</h2>

<h3 id="centos">CentOS</h3>

<p>CentOS7官方支持了AMRV7发布了树莓派2、香蕉派、以及CubitTruck单片机的版本</p>

<p><a href="http://mirror.centos.org/altarch/7/isos/armhfp/">CentOS7官方下载</a>
root 密码 centos
大约275MB</p>

<p>CentOS7.3也已发布</p>

<p><a href="http://mirror.centos.org/altarch/7.3.1611/isos/armhfp/">http://mirror.centos.org/altarch/7.3.1611/isos/armhfp/</a></p>

<p>树莓派2版254M</p>

<h3 id="archlinux">ArchLinux</h3>

<p><a href="https://archlinuxarm.org/">https://archlinuxarm.org/</a></p>

<p>树莓派1 <a href="https://archlinuxarm.org/platforms/armv6/raspberry-pi">https://archlinuxarm.org/platforms/armv6/raspberry-pi</a></p>

<p>树莓派2 <a href="https://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2">https://archlinuxarm.org/platforms/armv7/broadcom/raspberry-pi-2</a></p>

<p>树莓派3 <a href="https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3">https://archlinuxarm.org/platforms/armv8/broadcom/raspberry-pi-3</a></p>

<p>有国内的下载镜像 <a href="https://mirrors.tuna.tsinghua.edu.cn/archlinuxarm/os/">https://mirrors.tuna.tsinghua.edu.cn/archlinuxarm/os/</a></p>

<p>大约293MB</p>

<h2 id="安装osmc">安装OSMC</h2>

<p><a href="https://osmc.tv/download/">下载一览</a>,选择<code>Disk images</code>,此系统较省资源,默认开机进入OSMC,img.gz 大小约160M</p>

<pre><code>OSMC_FILE=OSMC_TGT_rbp2_20160621.img.gz
cd /data/tmp
axel -n 20 http://download.osmc.tv/installers/diskimages/$OSMC_FILE
md5sum $OSMC_FILE
ls -lh
</code></pre>

<p>查看所有版本 <a href="http://download.osmc.tv/installers/diskimages/">http://download.osmc.tv/installers/diskimages/</a></p>

<blockquote>
<p>使用清华大学镜像站国内下载速度更快: <a href="https://mirrors.tuna.tsinghua.edu.cn/osmc/osmc/download/installers/">https://mirrors.tuna.tsinghua.edu.cn/osmc/osmc/download/installers/</a></p>
</blockquote>

<p>插入内存卡,开始烧写到内存卡中.烧写之前需要取消挂载</p>

<p><code>diskutil list</code> 查看你的内存卡的挂载位置,取消挂载</p>

<p>执行<code>diskutil unmountdisk /dev/disk2</code> 取消挂载,需要稍等一小会.</p>

<p>烧写,烧写过程中读卡器不断闪烁.</p>

<pre><code>gzip -dc /data/tmp/$OSMC_FILE | sudo dd of=/dev/disk2 bs=8k
</code></pre>

<p>dd的用法: <code>dd if=/dev/zero of=hello.txt bs=1024</code></p>

<p>dd过程中看不到进度,如果确实想要了解进度,可以再开一个终端<code>pkill -USR1 -n -x dd</code>查看进度.</p>

<p>如果是iso文件,需要装换为img文件,</p>

<pre><code>hdiutil convert -format UDRW -o /path/to/generate/img/file /path/to/your/iso/file
</code></pre>

<p>mac osx会默认追加一个.dmg,这个没有影响,然后就可以使用dd写入这个img文件了.</p>

<p><code>diskutil eject /dev/disk1</code> 弹出USB,注意和卸载(<code>unmountdisk</code>)是不同的</p>

<p><a href="http://forum.kodi.tv/forumdisplay.php?fid=26">官方论坛</a></p>

<p>OSMC默认的ssh连接用户是 osmc 密码 osmc</p>

<p>osmc 启用 root 登陆</p>

<pre><code>sudo passwd --unlock root
</code></pre>

<p>修改root密码</p>

<pre><code>sudo passwd root
</code></pre>

<p>修改为国内镜像源
<code>/etc/apt/sources.list</code>原先内容</p>

<pre><code>
deb http://ftp.debian.org/debian jessie main contrib non-free

deb http://ftp.debian.org/debian/ jessie-updates main contrib non-free

deb http://security.debian.org/ jessie/updates main contrib non-free

deb http://apt.osmc.tv jessie main

</code></pre>

<p>修改为</p>

<pre><code>
deb http://mirrors.tuna.tsinghua.edu.cn/debian jessie main contrib non-free

deb http://mirrors.tuna.tsinghua.edu.cn/debian/ jessie-updates contrib main non-free

deb http://mirrors.tuna.tsinghua.edu.cn/debian-security/ jessie/updates main contrib non-free

deb http://mirrors.tuna.tsinghua.edu.cn/osmc/osmc/apt/  jessie main

</code></pre>

<p>在 <a href="http://www.debian.org/mirror/list">http://www.debian.org/mirror/list</a> 查看有多个国内镜像源</p>

<p>执行更新<code>sudo apt-get update -y &amp;&amp; sudo apt-get upgrade -y</code></p>

<p>安装常用工具<code>sudo apt-get install htop tree file telnet screen</code></p>

<p>安装<code>zsh</code>,可通过CURL或者WGET安装 <a href="https://github.com/robbyrussell/oh-my-zsh">https://github.com/robbyrussell/oh-my-zsh</a></p>

<pre><code>chsh -s /bin/zsh
</code></pre>

<h2 id="安装openelec">安装openelec</h2>

<p><a href="http://openelec.tv/get-openelec">openelec</a> 镜像下载,osmc是基于debain的,系统更加完善.此系统相比osmc更加精简,是专为跑kodi精简的系统. img.gz 大小约102M</p>

<h2 id="安装xbian">安装xbian</h2>

<p><a href="http://www.xbian.org/">http://www.xbian.org/</a></p>

<p>与openelec,osmc都是类似,img.gz较大,大约316MB</p>

<h2 id="安装chromeos">安装ChromeOs</h2>

<p>ChromeOs已经有支持树莓派的版本了,<a href="www.chromiumosforsbc.org">www.chromiumosforsbc.org</a></p>

<h2 id="配置镜像加速">配置镜像加速</h2>

<p>一:树莓派常用软件源列表</p>

<p>中山大学</p>

<p>Raspbian <a href="http://mirror.sysu.edu.cn/raspbian/raspbian">http://mirror.sysu.edu.cn/raspbian/raspbian</a></p>

<p>中国科学技术大学</p>

<p>Raspbian <a href="http://mirrors.ustc.edu.cn/raspbian/raspbian/">http://mirrors.ustc.edu.cn/raspbian/raspbian/</a></p>

<p>清华大学</p>

<p>Raspbian <a href="http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/">http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/</a></p>

<p>大连东软信息学院源（北方用户）</p>

<p>Raspbian <a href="http://mirrors.neusoft.edu.cn/raspbian/raspbian/">http://mirrors.neusoft.edu.cn/raspbian/raspbian/</a></p>

<p>重庆大学源（中西部用户）</p>

<p>Raspbian <a href="http://mirrors.cqu.edu.cn/Raspbian/raspbian/">http://mirrors.cqu.edu.cn/Raspbian/raspbian/</a></p>

<p>二、树莓派修改软件源的方法</p>

<p>编辑/etc/apt/sources.list文件。删除原文件所有内容，用以下内容取代：</p>

<pre><code>deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ wheezy main non-free contrib

deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ wheezy main non-free contrib
</code></pre>

<p>编辑此文件后，请使用sudo apt-get update命令，更新软件列表。</p>

<p>这样树莓派更新软件就会使用中国科学技术大学的镜像源，从而大大提高更新速度，要使用其他的软件源，根据以上代码就行修改。</p>

<h2 id="关于各种派的性能比较">关于各种派的性能比较</h2>

<p>树莓派3仅仅插单个tf卡一般功率为2.5W 树莓派2更少</p>

<p>每度电0.5元,一年不间断运行.按此计算 一年电费</p>

<pre><code>2.5*24*365/1000*0.5=10.95
</code></pre>

<p>不足一顿午饭钱,相当于200W的台式机不间断工作5天</p>

<p><a href="https://www.zhihu.com/question/37202806">https://www.zhihu.com/question/37202806</a></p>

<p>参数一览</p>

<p><a href="https://cdn.shopify.com/s/files/1/1098/4826/files/comparisonupdate.png?13077955502273113275">https://cdn.shopify.com/s/files/1/1098/4826/files/comparisonupdate.png?13077955502273113275</a></p>

<p>温度 <code>/opt/vc/bin/vcgencmd measure_temp</code></p>

<p><code>watch /opt/vc/bin/vcgencmd measure_temp</code></p>

<p>参考</p>

<p><code>https://ky0n.xyz/osmc-init/</code></p>

<p><code>http://blog.laolilin.com/posts/2016/10/config_raspberry_pi.html#.WBR2huF96Rs</code></p>

<p><code>https://www.zybuluo.com/yangxuan/note/321467</code></p>

<h2 id="bash-乱码设置">bash 乱码设置</h2>

<p><code>env|grep LANG</code> 查看当前编码</p>

<p>清除 <code>unset LANG</code></p>

<p><code>export LANG=zh_CN.UTF-8</code></p>

<p>sudo apt-get install zhcon</p>

		</div>
	</div>
</div>
	<div class="music-container">
	<div class="music-header">
	    <a class="fa-button home" href="javascript:music.show(0)"><i class="fa fa-home" title="Home"></i></a>
	    <a class="fa-button next" href="javascript:music.next()"><i class="fa fa-chevron-right" title="Next"></i></a>
	</div>
	<div class="backdrop"></div>
	<div class="music-player">
		<div class="cover">
            <img src="http://p4.music.126.net/ckfEE9UUGcnGHylQJ12ENA==/670702092966093.jpg?param=350y350">
            <div class="foredrag"><i class="fa fa-play"></i></div>
        </div>
        <div class="progress">
            <div class="elapse"></div>
        </div>
        <div class="detail">
            <div class="title">音乐标题</div>
            <div class="artist">歌手</div>
        </div>
	</div>
</div>
<div id="loader" style="z-index:99999;" class="pageload-overlay" data-opening="M 40 -21.875 C 11.356078 -21.875 -11.875 1.3560784 -11.875 30 C -11.875 58.643922 11.356078 81.875 40 81.875 C 68.643922 81.875 91.875 58.643922 91.875 30 C 91.875 1.3560784 68.643922 -21.875 40 -21.875 Z">
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60" preserveAspectRatio="xMidYMid slice"> <path d="M40,30 c 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 Z"/></svg>
</div>

	<footer class="footer">
		<div class="footer-nav">
			<ul>
				<li><a href="/post/">归档</a></li>
				<li><a href="/">专题</a></li>
				<li><a href="/life/">生活</a></li>
				<li><a href="/about/">关于</a></li>
			</ul>
		</div>
	</footer>
	<script type="text/javascript" src="/js/main.min.js" data-no-instant></script>
</body>
</html>


